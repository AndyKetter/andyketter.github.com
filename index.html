<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="你若安好便是晴天">
<meta property="og:type" content="website">
<meta property="og:title" content="白马非白">
<meta property="og:url" content="https://andyketter.github.io/index.html">
<meta property="og:site_name" content="白马非白">
<meta property="og:description" content="你若安好便是晴天">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="白马非白">
<meta name="twitter:description" content="你若安好便是晴天">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://andyketter.github.io/"/>





  <title> 白马非白 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">白马非白</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">心若没有栖息的地方 到哪里都是流浪</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://andyketter.github.io/2017/02/15/fetch/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="墨含">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="白马非白">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="白马非白" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/15/fetch/" itemprop="url">
                  fetch
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T11:44:13+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/15/fetch/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/15/fetch/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="window-fetch-polyfill"><a href="#window-fetch-polyfill" class="headerlink" title="window.fetch polyfill"></a>window.fetch polyfill</h1><p>The <code>fetch()</code> function is a Promise-based mechanism for programatically making<br>web requests in the browser. This project is a polyfill that implements a subset<br>of the standard <a href="https://fetch.spec.whatwg.org" target="_blank" rel="external">Fetch specification</a>, enough to make <code>fetch</code> a viable<br>replacement for most uses of XMLHttpRequest in traditional web applications.</p>
<p>This project adheres to the <a href="http://todogroup.org/opencodeofconduct/#fetch/opensource@github.com" target="_blank" rel="external">Open Code of Conduct</a>. By participating, you are<br>expected to uphold this code.</p>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#read-this-first">Read this first</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#html">HTML</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#response-metadata">Response metadata</a></li>
<li><a href="#post-form">Post form</a></li>
<li><a href="#post-json">Post JSON</a></li>
<li><a href="#file-upload">File upload</a></li>
<li><a href="#caveats">Caveats</a><ul>
<li><a href="#handling-http-error-statuses">Handling HTTP error statuses</a></li>
<li><a href="#sending-cookies">Sending cookies</a></li>
<li><a href="#receiving-cookies">Receiving cookies</a></li>
<li><a href="#obtaining-the-response-url">Obtaining the Response URL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#browser-support">Browser Support</a></li>
</ul>
<h2 id="Read-this-first"><a href="#Read-this-first" class="headerlink" title="Read this first"></a>Read this first</h2><ul>
<li><p>If you believe you found a bug with how <code>fetch</code> behaves in Chrome or Firefox,<br>please <strong>avoid opening an issue in this repository</strong>. This project is a<br><em>polyfill</em>, and since Chrome and Firefox both implement the <code>window.fetch</code><br>function natively, no code from this project actually takes any effect in<br>these browsers. See <a href="#browser-support">Browser support</a> for detailed<br>information.</p>
</li>
<li><p>If you have trouble <strong>making a request to another domain</strong> (a different<br>subdomain or port number also constitutes as another domain), please<br>familiarize yourself with all the intricacies and limitations of <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">CORS</a><br>requests. Because CORS requires participation of the server by implementing<br>specific HTTP response headers, it is often nontrivial to set up or debug.<br>CORS is exclusively handled by the browser’s internal mechanisms which this<br>polyfill cannot influence.</p>
</li>
<li><p>If you have trouble <strong>maintaining the user’s session</strong> or <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet" target="_blank" rel="external">CSRF</a> protection<br>through <code>fetch</code> requests, please ensure that you’ve read and understood the<br><a href="#sending-cookies">Sending cookies</a> section.</p>
</li>
<li><p>If this polyfill <strong>doesn’t work under Node.js environment</strong>, that is expected,<br>because this project is meant for web browsers only. You should ensure that your<br>application doesn’t try to package and run this on the server.</p>
</li>
<li><p>If you have an idea for a new feature of <code>fetch</code>, please understand that we<br>are only ever going to add features and APIs that are a part of the<br><a href="https://fetch.spec.whatwg.org" target="_blank" rel="external">Fetch specification</a>. You should <strong>submit your feature requests</strong> to the<br><a href="https://github.com/whatwg/fetch/issues" target="_blank" rel="external">repository of the specification</a><br>itself, rather than this repository.</p>
</li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><ul>
<li><p><code>npm install whatwg-fetch --save</code>; or</p>
</li>
<li><p><code>bower install fetch</code>.</p>
</li>
</ul>
<p>You will also need a Promise polyfill for <a href="http://caniuse.com/#feat=promises" target="_blank" rel="external">older browsers</a>.<br>We recommend <a href="https://github.com/taylorhakes/promise-polyfill" target="_blank" rel="external">taylorhakes/promise-polyfill</a><br>for its small size and Promises/A+ compatibility.</p>
<p>For use with webpack, add this package in the <code>entry</code> configuration option<br>before your application entry point:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">entry: [<span class="string">'whatwg-fetch'</span>, ...]</div></pre></td></tr></table></figure>
<p>For Babel and ES2015+, make sure to import the file:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'whatwg-fetch'</span></div></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>For a more comprehensive API reference that this polyfill supports, refer to<br><a href="https://github.github.io/fetch/" target="_blank" rel="external">https://github.github.io/fetch/</a>.</p>
<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'/users.html'</span>)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> response.text()</div><div class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">body</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.body.innerHTML = body</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'/users.json'</span>)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> response.json()</div><div class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'parsed json'</span>, json)</div><div class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">ex</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'parsing failed'</span>, ex)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h3 id="Response-metadata"><a href="#Response-metadata" class="headerlink" title="Response metadata"></a>Response metadata</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'/users.json'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(response.headers.get(<span class="string">'Content-Type'</span>))</div><div class="line">  <span class="built_in">console</span>.log(response.headers.get(<span class="string">'Date'</span>))</div><div class="line">  <span class="built_in">console</span>.log(response.status)</div><div class="line">  <span class="built_in">console</span>.log(response.statusText)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Post-form"><a href="#Post-form" class="headerlink" title="Post form"></a>Post form</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.querySelector(<span class="string">'form'</span>)</div><div class="line"></div><div class="line">fetch(<span class="string">'/users'</span>, &#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">  <span class="attr">body</span>: <span class="keyword">new</span> FormData(form)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Post-JSON"><a href="#Post-JSON" class="headerlink" title="Post JSON"></a>Post JSON</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'/users'</span>, &#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">  <span class="attr">headers</span>: &#123;</div><div class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Hubot'</span>,</div><div class="line">    <span class="attr">login</span>: <span class="string">'hubot'</span>,</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="File-upload"><a href="#File-upload" class="headerlink" title="File upload"></a>File upload</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.querySelector(<span class="string">'input[type="file"]'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData()</div><div class="line">data.append(<span class="string">'file'</span>, input.files[<span class="number">0</span>])</div><div class="line">data.append(<span class="string">'user'</span>, <span class="string">'hubot'</span>)</div><div class="line"></div><div class="line">fetch(<span class="string">'/avatars'</span>, &#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">  <span class="attr">body</span>: data</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Caveats"><a href="#Caveats" class="headerlink" title="Caveats"></a>Caveats</h3><p>The <code>fetch</code> specification differs from <code>jQuery.ajax()</code> in mainly two ways that<br>bear keeping in mind:</p>
<ul>
<li><p>The Promise returned from <code>fetch()</code> <strong>won’t reject on HTTP error status</strong><br>even if the response is a HTTP 404 or 500. Instead, it will resolve normally,<br>and it will only reject on network failure, or if anything prevented the<br>request from completing.</p>
</li>
<li><p>By default, <code>fetch</code> <strong>won’t send or receive any cookies</strong> from the server,<br>resulting in unauthenticated requests if the site relies on maintaining a user<br>session. See <a href="#sending-cookies">Sending cookies</a> for how to opt into cookie<br>handling.</p>
</li>
</ul>
<h4 id="Handling-HTTP-error-statuses"><a href="#Handling-HTTP-error-statuses" class="headerlink" title="Handling HTTP error statuses"></a>Handling HTTP error statuses</h4><p>To have <code>fetch</code> Promise reject on HTTP error statuses, i.e. on any non-2xx<br>status, define a custom response handler:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (response.status &gt;= <span class="number">200</span> &amp;&amp; response.status &lt; <span class="number">300</span>) &#123;</div><div class="line">    <span class="keyword">return</span> response</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">var</span> error = <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText)</div><div class="line">    error.response = response</div><div class="line">    <span class="keyword">throw</span> error</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseJSON</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> response.json()</div><div class="line">&#125;</div><div class="line"></div><div class="line">fetch(<span class="string">'/users'</span>)</div><div class="line">  .then(checkStatus)</div><div class="line">  .then(parseJSON)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'request succeeded with JSON response'</span>, data)</div><div class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'request failed'</span>, error)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h4 id="Sending-cookies"><a href="#Sending-cookies" class="headerlink" title="Sending cookies"></a>Sending cookies</h4><p>To automatically send cookies for the current domain, the <code>credentials</code> option<br>must be provided:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'/users'</span>, &#123;</div><div class="line">  <span class="attr">credentials</span>: <span class="string">'same-origin'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>The “same-origin” value makes <code>fetch</code> behave similarly to XMLHttpRequest with<br>regards to cookies. Otherwise, cookies won’t get sent, resulting in these<br>requests not preserving the authentication session.</p>
<p>For <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">CORS</a> requests, use the “include” value to allow sending credentials to<br>other domains:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'https://example.com:1234/users'</span>, &#123;</div><div class="line">  <span class="attr">credentials</span>: <span class="string">'include'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="Receiving-cookies"><a href="#Receiving-cookies" class="headerlink" title="Receiving cookies"></a>Receiving cookies</h4><p>Like with XMLHttpRequest, the <code>Set-Cookie</code> response header returned from the<br>server is a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name" target="_blank" rel="external">forbidden header name</a> and therefore can’t be programatically<br>read with <code>response.headers.get()</code>. Instead, it’s the browser’s responsibility<br>to handle new cookies being set (if applicable to the current URL). Unless they<br>are HTTP-only, new cookies will be available through <code>document.cookie</code>.</p>
<p>Bear in mind that the default behavior of <code>fetch</code> is to ignore the <code>Set-Cookie</code><br>header completely. To opt into accepting cookies from the server, you must use<br>the <code>credentials</code> option.</p>
<h4 id="Obtaining-the-Response-URL"><a href="#Obtaining-the-Response-URL" class="headerlink" title="Obtaining the Response URL"></a>Obtaining the Response URL</h4><p>Due to limitations of XMLHttpRequest, the <code>response.url</code> value might not be<br>reliable after HTTP redirects on older browsers.</p>
<p>The solution is to configure the server to set the response HTTP header<br><code>X-Request-URL</code> to the current URL after any redirect that might have happened.<br>It should be safe to set it unconditionally.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Ruby on Rails controller example</span></div><div class="line">response.headers[<span class="string">'X-Request-URL'</span>] = request.url</div></pre></td></tr></table></figure>
<p>This server workaround is necessary if you need reliable <code>response.url</code> in<br>Firefox &lt; 32, Chrome &lt; 37, Safari, or IE.</p>
<h2 id="Browser-Support"><a href="#Browser-Support" class="headerlink" title="Browser Support"></a>Browser Support</h2><ul>
<li>Chrome</li>
<li>Firefox</li>
<li>Safari 6.1+</li>
<li>Internet Explorer 10+</li>
</ul>
<p>Note: modern browsers such as Chrome, Firefox, and Microsoft Edge contain native<br>implementations of <code>window.fetch</code>, therefore the code from this polyfill doesn’t<br>have any effect on those browsers. If you believe you’ve encountered an error<br>with how <code>window.fetch</code> is implemented in any of these browsers, you should file<br>an issue with that browser vendor instead of this project.</p>
<pre><code>&quot;Cross-origin resource sharing&quot;
</code></pre><pre><code>&quot;Cross-site request forgery&quot;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://andyketter.github.io/2017/02/15/react/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="墨含">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="白马非白">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="白马非白" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/15/react/" itemprop="url">
                  react
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T11:43:05+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/15/react/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/15/react/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>This is a collection of simple demos of React.js.</p>
<p>These demos are purposely written in a simple and clear style. You will find no difficulty in following them to learn the powerful library.</p>
<h2 id="Related-Projects"><a href="#Related-Projects" class="headerlink" title="Related Projects"></a>Related Projects</h2><ul>
<li><a href="https://github.com/ruanyf/extremely-simple-flux-demo" target="_blank" rel="external">Flux Demo</a></li>
<li><a href="https://github.com/ruanyf/webpack-demos" target="_blank" rel="external">Webpack Demos</a></li>
<li><a href="https://github.com/reactjs/react-router-tutorial" target="_blank" rel="external">React Router Tutorial</a></li>
<li><a href="https://github.com/ruanyf/css-modules-demos" target="_blank" rel="external">CSS Modules Demos</a></li>
<li><a href="https://github.com/ruanyf/react-testing-demo" target="_blank" rel="external">React Testing Demo</a></li>
<li><a href="https://github.com/ruanyf/react-babel-webpack-boilerplate" target="_blank" rel="external">A boilerplate for React-Babel-Webpack project</a></li>
</ul>
<h2 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h2><p>First copy the repo into your disk.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> git@github.com:ruanyf/react-demos.git</div></pre></td></tr></table></figure>
<p>Then play with the source files under the repo’s demo* directories.</p>
<h2 id="HTML-Template"><a href="#HTML-Template" class="headerlink" title="HTML Template"></a>HTML Template</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/browser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/babel"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">      <span class="comment">// ** Our code goes here! **</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#demo01-render-jsx">Render JSX</a></li>
<li><a href="#demo02-use-javascript-in-jsx">Use JavaScript in JSX</a></li>
<li><a href="#demo03-use-array-in-jsx">Use array in JSX</a></li>
<li><a href="#demo04-define-a-component">Define a component</a></li>
<li><a href="#demo05-thispropschildren">this.props.children</a></li>
<li><a href="#demo06-proptypes">PropTypes</a></li>
<li><a href="#demo07-finding-a-dom-node">Finding a DOM node</a></li>
<li><a href="#demo08-thisstate">this.state</a></li>
<li><a href="#demo09-form">Form</a></li>
<li><a href="#demo10-component-lifecycle">Component Lifecycle</a></li>
<li><a href="#demo11-ajax">Ajax</a></li>
<li><a href="#demo12-display-value-from-a-promise">Display value from a Promise</a></li>
<li><a href="#demo13-server-side-rendering">Server-side rendering</a></li>
</ol>
<hr>
<h2 id="Demo01-Render-JSX"><a href="#Demo01-Render-JSX" class="headerlink" title="Demo01: Render JSX"></a>Demo01: Render JSX</h2><p><a href="http://ruanyf.github.io/react-demos/demo01/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo01/index.html" target="_blank" rel="external">source</a></p>
<p>The template syntax in React is called <a href="http://facebook.github.io/react/docs/displaying-data.html#jsx-syntax" target="_blank" rel="external">JSX</a>. It is allowed in JSX to put HTML tags directly into JavaScript codes. <code>ReactDOM.render()</code> is the method which translates JSX into HTML, and renders it into the specified DOM node.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>Attention, you have to use <code>&lt;script type=&quot;text/babel&quot;&gt;</code> to indicate JSX codes, and include <code>browser.min.js</code>, which is a <a href="https://babeljs.io/docs/usage/browser/" target="_blank" rel="external">browser version</a> of Babel and could be get inside a <a href="https://www.npmjs.com/package/babel-core" target="_blank" rel="external">babel-core@5</a> npm release, to actually perform the transformation in the browser.</p>
<p>Before v0.14, React use <code>JSTransform.js</code> to translate <code>&lt;script type=&quot;text/jsx&quot;&gt;</code>. It has been deprecated (<a href="https://facebook.github.io/react/blog/2015/06/12/deprecating-jstransform-and-react-tools.html" target="_blank" rel="external">more info</a>).</p>
<h2 id="Demo02-Use-JavaScript-in-JSX"><a href="#Demo02-Use-JavaScript-in-JSX" class="headerlink" title="Demo02: Use JavaScript in JSX"></a>Demo02: Use JavaScript in JSX</h2><p><a href="http://ruanyf.github.io/react-demos/demo02/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo02/index.html" target="_blank" rel="external">source</a></p>
<p>You could also use JavaScript in JSX. It takes angle brackets (&lt;) as the beginning of HTML syntax, and curly brackets (<code>{</code>) as the beginning of JavaScript syntax.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> names = [<span class="string">'Alice'</span>, <span class="string">'Emily'</span>, <span class="string">'Kate'</span>];</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">  &#123;</div><div class="line">    names.map(function (name) &#123;</div><div class="line">      return <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="Demo03-Use-array-in-JSX"><a href="#Demo03-Use-array-in-JSX" class="headerlink" title="Demo03: Use array in JSX"></a>Demo03: Use array in JSX</h2><p><a href="http://ruanyf.github.io/react-demos/demo03/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo03/index.html" target="_blank" rel="external">source</a></p>
<p>If a JavaScript variable is an array, JSX will implicitly concat all members of the array.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var arr = [</div><div class="line">  &lt;h1&gt;Hello world!&lt;/h1&gt;,</div><div class="line">  &lt;h2&gt;React is awesome&lt;/h2&gt;,</div><div class="line">];</div><div class="line">ReactDOM.render(</div><div class="line">  &lt;div&gt;&#123;arr&#125;&lt;/div&gt;,</div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="Demo04-Define-a-component"><a href="#Demo04-Define-a-component" class="headerlink" title="Demo04: Define a component"></a>Demo04: Define a component</h2><p><a href="http://ruanyf.github.io/react-demos/demo04/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo04/index.html" target="_blank" rel="external">source</a></p>
<p><code>React.createClass()</code> creates a component class, which implements a render method to return an component instance of the class. You don’t need to call <code>new</code> on the class in order to get an instance, just use it as a normal HTML tag.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> HelloMessage = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">HelloMessage</span> <span class="attr">name</span>=<span class="string">"John"</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>Components would have attributes, and you can use <code>this.props.[attribute]</code> to access them, just like <code>this.props.name</code> of <code>&lt;HelloMessage name=&quot;John&quot; /&gt;</code> is John.</p>
<p>Please remember the first letter of the component’s name must be capitalized, otherwise React will throw an error. For instance, <code>HelloMessage</code> as a component’s name is OK, but <code>helloMessage</code> is not allowed. And a React component should only have one top child node.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// wrong</span></div><div class="line"><span class="keyword">var</span> HelloMessage = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></div><div class="line">      Hello &#123;this.props.name&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></div><div class="line">      some text</div><div class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// correct</span></div><div class="line"><span class="keyword">var</span> HelloMessage = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>some text<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Demo05-this-props-children"><a href="#Demo05-this-props-children" class="headerlink" title="Demo05: this.props.children"></a>Demo05: this.props.children</h2><p><a href="http://ruanyf.github.io/react-demos/demo05/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo05/index.html" target="_blank" rel="external">source</a></p>
<p>React uses <code>this.props.children</code> to access a component’s children nodes.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> NotesList = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span></div><div class="line">      &#123;</div><div class="line">        React.Children.map(this.props.children, function (child) &#123;</div><div class="line">          return <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>;</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">NotesList</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>world<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">NotesList</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>Please be mindful that the value of <code>this.props.children</code> has three possibilities. If the component has no children node, the value is <code>undefined</code>; If single children node, an object; If multiple children nodes, an array. You should be careful to handle it.</p>
<p>React gave us an utility <a href="https://facebook.github.io/react/docs/top-level-api.html#react.children" target="_blank" rel="external"><code>React.Children</code></a> for dealing with the <code>this.props.children</code>‘s opaque data structure. You could use <code>React.Children.map</code> to iterate <code>this.props.children</code> without worring its data type being <code>undefined</code> or <code>object</code>. Check <a href="https://facebook.github.io/react/docs/top-level-api.html#react.children" target="_blank" rel="external">official document</a> for more methods <code>React.Children</code> offers.</p>
<h2 id="Demo06-PropTypes"><a href="#Demo06-PropTypes" class="headerlink" title="Demo06: PropTypes"></a>Demo06: PropTypes</h2><p><a href="http://ruanyf.github.io/react-demos/demo06/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo06/index.html" target="_blank" rel="external">source</a></p>
<p>Components have many specific attributes which are called ”props” in React and can be of any type.</p>
<p>Sometimes you need a way to validate these props. You don’t want users have the freedom to input anything into your components.</p>
<p>React has a solution for this and it’s called PropTypes.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyTitle = React.createClass(&#123;</div><div class="line">  <span class="attr">propTypes</span>: &#123;</div><div class="line">    <span class="attr">title</span>: React.PropTypes.string.isRequired,</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> &#123;this.props.title&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</div><div class="line">   &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The above component of <code>MyTitle</code> has a props of <code>title</code>. PropTypes tells React that the title is required and its value should be a string.</p>
<p>Now we give <code>Title</code> a number value.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data = <span class="number">123</span>;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">MyTitle</span> <span class="attr">title</span>=<span class="string">&#123;data&#125;</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>It means the props doesn’t pass the validation, and the console will show you an error message.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Warning: Failed propType: Invalid prop `title` of <span class="built_in">type</span> `number` supplied to `MyTitle`, expected `string`.</div></pre></td></tr></table></figure>
<p>Visit <a href="http://facebook.github.io/react/docs/reusable-components.html" target="_blank" rel="external">official doc</a> for more PropTypes options.</p>
<p>P.S. If you want to give the props a default value, use <code>getDefaultProps()</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyTitle = React.createClass(&#123;</div><div class="line">  <span class="attr">getDefaultProps</span> : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">title</span> : <span class="string">'Hello World'</span></div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> &#123;this.props.title&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</div><div class="line">   &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">MyTitle</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="Demo07-Finding-a-DOM-node"><a href="#Demo07-Finding-a-DOM-node" class="headerlink" title="Demo07: Finding a DOM node"></a>Demo07: Finding a DOM node</h2><p><a href="http://ruanyf.github.io/react-demos/demo07/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo07/index.html" target="_blank" rel="external">source</a></p>
<p>Sometimes you need to reference a DOM node in a component. React gives you the <code>ref</code> attribute to find it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyComponent = React.createClass(&#123;</div><div class="line">  <span class="attr">handleClick</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.refs.myTextInput.focus();</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;input type="text" ref="myTextInput" /&gt;</div><div class="line">        &lt;input type="button" value="Focus the text input" onClick=&#123;this.handleClick&#125; /&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;MyComponent /&gt;,</div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>The desired DOM node should have a <code>ref</code> attribute, and <code>this.refs.[refName]</code> would return the corresponding DOM node. Please be mindful that you could do that only after this component has been mounted into the DOM, otherwise you get <code>null</code>.</p>
<h2 id="Demo08-this-state"><a href="#Demo08-this-state" class="headerlink" title="Demo08: this.state"></a>Demo08: this.state</h2><p><a href="http://ruanyf.github.io/react-demos/demo08/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo08/index.html" target="_blank" rel="external">source</a></p>
<p>React thinks of component as state machines, and uses <code>this.state</code> to hold component’s state, <code>getInitialState()</code> to initialize <code>this.state</code>(invoked before a component is mounted), <code>this.setState()</code> to update <code>this.state</code> and re-render the component.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> LikeButton = React.createClass(&#123;</div><div class="line">  <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;<span class="attr">liked</span>: <span class="literal">false</span>&#125;;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">handleClick</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">liked</span>: !<span class="keyword">this</span>.state.liked&#125;);</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> text = <span class="keyword">this</span>.state.liked ? <span class="string">'like'</span> : <span class="string">'haven\'t liked'</span>;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span></span></div><div class="line">        You &#123;text&#125; this. Click to toggle.</div><div class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">LikeButton</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>You could use component attributes to register event handlers, just like <code>onClick</code>, <code>onKeyDown</code>, <code>onCopy</code>, etc. Official Document has all <a href="http://facebook.github.io/react/docs/events.html#supported-events" target="_blank" rel="external">supported events</a>.</p>
<h2 id="Demo09-Form"><a href="#Demo09-Form" class="headerlink" title="Demo09: Form"></a>Demo09: Form</h2><p><a href="http://ruanyf.github.io/react-demos/demo09/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo09/index.html" target="_blank" rel="external">source</a></p>
<p>According to React’s design philosophy, <code>this.state</code> describes the state of component and is mutated via user interactions, and <code>this.props</code> describes the properties of component and is stable and immutable.</p>
<p>Since that, the <code>value</code> attribute of Form components, such as &lt;input&gt;, &lt;textarea&gt;, and &lt;option&gt;, is unaffected by any user input. If you wanted to access or update the value in response to user input, you could use the onChange event.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Input = React.createClass(&#123;</div><div class="line">  <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="string">'Hello!'</span>&#125;;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">handleChange</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">value</span>: event.target.value&#125;);</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> value = <span class="keyword">this</span>.state.value;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(<span class="tag">&lt;<span class="name">Input</span>/&gt;</span>, document.getElementById('example'));</div></pre></td></tr></table></figure>
<p>More information on <a href="http://facebook.github.io/react/docs/forms.html" target="_blank" rel="external">official document</a>.</p>
<h2 id="Demo10-Component-Lifecycle"><a href="#Demo10-Component-Lifecycle" class="headerlink" title="Demo10: Component Lifecycle"></a>Demo10: Component Lifecycle</h2><p><a href="http://ruanyf.github.io/react-demos/demo10/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo10/index.html" target="_blank" rel="external">source</a></p>
<p>Components have three main parts of <a href="https://facebook.github.io/react/docs/working-with-the-browser.html#component-lifecycle" target="_blank" rel="external">their lifecycle</a>: Mounting(being inserted into the DOM), Updating(being re-rendered) and Unmounting(being removed from the DOM). React provides hooks into these lifecycle part. <code>will</code> methods are called right before something happens, and <code>did</code> methods which are called right after something happens.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Hello = React.createClass(&#123;</div><div class="line">  <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">opacity</span>: <span class="number">1.0</span></div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">componentDidMount</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> opacity = <span class="keyword">this</span>.state.opacity;</div><div class="line">      opacity -= <span class="number">.05</span>;</div><div class="line">      <span class="keyword">if</span> (opacity &lt; <span class="number">0.1</span>) &#123;</div><div class="line">        opacity = <span class="number">1.0</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.setState(&#123;</div><div class="line">        <span class="attr">opacity</span>: opacity</div><div class="line">      &#125;);</div><div class="line">    &#125;.bind(<span class="keyword">this</span>), <span class="number">100</span>);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;opacity:</span> <span class="attr">this.state.opacity</span>&#125;&#125;&gt;</span></span></div><div class="line">        Hello &#123;this.props.name&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Hello</span> <span class="attr">name</span>=<span class="string">"world"</span>/&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>The following is <a href="http://facebook.github.io/react/docs/component-specs.html#lifecycle-methods" target="_blank" rel="external">a whole list of lifecycle methods</a>.</p>
<ul>
<li><strong>componentWillMount()</strong>: Fired once, before initial rendering occurs. Good place to wire-up message listeners. <code>this.setState</code> doesn’t work here.</li>
<li><strong>componentDidMount()</strong>: Fired once, after initial rendering occurs. Can use <code>this.getDOMNode()</code>.</li>
<li><strong>componentWillUpdate(object nextProps, object nextState)</strong>: Fired after the component’s updates are made to the DOM. Can use <code>this.getDOMNode()</code> for updates.</li>
<li><strong>componentDidUpdate(object prevProps, object prevState)</strong>: Invoked immediately after the component’s updates are flushed to the DOM. This method is not called for the initial render. Use this as an opportunity to operate on the DOM when the component has been updated.</li>
<li><strong>componentWillUnmount()</strong>: Fired immediately before a component is unmounted from the DOM. Good place to remove message listeners or general clean up.</li>
<li><strong>componentWillReceiveProps(object nextProps)</strong>: Fired when a component is receiving new props. You might want to <code>this.setState</code> depending on the props.</li>
<li><strong>shouldComponentUpdate(object nextProps, object nextState)</strong>: Fired before rendering when new props or state are received. <code>return false</code> if you know an update isn’t needed.</li>
</ul>
<h2 id="Demo11-Ajax"><a href="#Demo11-Ajax" class="headerlink" title="Demo11: Ajax"></a>Demo11: Ajax</h2><p><a href="http://ruanyf.github.io/react-demos/demo11/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo11/index.html" target="_blank" rel="external">source</a></p>
<p>How to get the data of a component from a server or an API provider? The answer is using Ajax to fetch data in the event handler of <code>componentDidMount</code>. When the server response arrives, store the data with <code>this.setState()</code> to trigger a re-render of your UI.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> UserGist = React.createClass(&#123;</div><div class="line">  <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">username</span>: <span class="string">''</span>,</div><div class="line">      <span class="attr">lastGistUrl</span>: <span class="string">''</span></div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">componentDidMount</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $.get(<span class="keyword">this</span>.props.source, <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> lastGist = result[<span class="number">0</span>];</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.isMounted()) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">          <span class="attr">username</span>: lastGist.owner.login,</div><div class="line">          <span class="attr">lastGistUrl</span>: lastGist.html_url</div><div class="line">        &#125;);</div><div class="line">      &#125;</div><div class="line">    &#125;.bind(<span class="keyword">this</span>));</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        &#123;this.state.username&#125;'s last gist is</div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;this.state.lastGistUrl&#125;</span>&gt;</span>here<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.</div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">UserGist</span> <span class="attr">source</span>=<span class="string">"https://api.github.com/users/octocat/gists"</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="Demo12-Display-value-from-a-Promise"><a href="#Demo12-Display-value-from-a-Promise" class="headerlink" title="Demo12: Display value from a Promise"></a>Demo12: Display value from a Promise</h2><p><a href="http://ruanyf.github.io/react-demos/demo12/" target="_blank" rel="external">demo</a> / <a href="https://github.com/ruanyf/react-demos/blob/master/demo12/index.html" target="_blank" rel="external">source</a></p>
<p>This demo is inspired by Nat Pryce’s article <a href="http://natpryce.com/articles/000814.html" target="_blank" rel="external">“Higher Order React Components”</a>.</p>
<p>If a React component’s data is received asynchronously, we can use a Promise object as the component’s property also, just as the following.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">RepoList</span></span></span></div><div class="line">    <span class="attr">promise</span>=<span class="string">&#123;$.getJSON(</span>'<span class="attr">https:</span>//<span class="attr">api.github.com</span>/<span class="attr">search</span>/<span class="attr">repositories</span>?<span class="attr">q</span>=<span class="string">javascript&amp;sort</span>=<span class="string">stars</span>')&#125;</div><div class="line">  /&gt;,</div><div class="line">  document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>The above code takes data from Github’s API, and the <code>RepoList</code> component gets a Promise object as its property.</p>
<p>Now, while the promise is pending, the component displays a loading indicator. When the promise is resolved successfully, the component displays a list of repository information. If the promise is rejected, the component displays an error message.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> RepoList = React.createClass(&#123;</div><div class="line">  <span class="attr">getInitialState</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123; <span class="attr">loading</span>: <span class="literal">true</span>, <span class="attr">error</span>: <span class="literal">null</span>, <span class="attr">data</span>: <span class="literal">null</span>&#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.props.promise.then(</div><div class="line">      <span class="function"><span class="params">value</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123;<span class="attr">loading</span>: <span class="literal">false</span>, <span class="attr">data</span>: value&#125;),</div><div class="line">      error =&gt; <span class="keyword">this</span>.setState(&#123;<span class="attr">loading</span>: <span class="literal">false</span>, <span class="attr">error</span>: error&#125;));</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.loading) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.state.error !== <span class="literal">null</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Error: &#123;this.state.error.message&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">var</span> repos = <span class="keyword">this</span>.state.data.items;</div><div class="line">      <span class="keyword">var</span> repoList = repos.map(<span class="function"><span class="keyword">function</span> (<span class="params">repo</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">          <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;repo.html_url&#125;</span>&gt;</span>&#123;repo.name&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> (&#123;repo.stargazers_count&#125; stars) <span class="tag">&lt;<span class="name">br</span>/&gt;</span> &#123;repo.description&#125;</div><div class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        );</div><div class="line">      &#125;);</div><div class="line">      <span class="keyword">return</span> (</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span></div><div class="line">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Most Popular JavaScript Projects in Github<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">ol</span>&gt;</span>&#123;repoList&#125;<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">main</span>&gt;</span></div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Demo13-Server-side-rendering"><a href="#Demo13-Server-side-rendering" class="headerlink" title="Demo13: Server-side rendering"></a>Demo13: Server-side rendering</h2><p><a href="https://github.com/ruanyf/react-demos/tree/master/demo13/src" target="_blank" rel="external">source</a></p>
<p>This demo is copied from <a href="https://github.com/mhart/react-server-example" target="_blank" rel="external">github.com/mhart/react-server-example</a>, but I rewrote it with JSX syntax.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># install the dependencies in demo13 directory</span></div><div class="line">$ npm install</div><div class="line"></div><div class="line"><span class="comment"># translate all jsx file in src subdirectory to js file</span></div><div class="line">$ npm run build</div><div class="line"></div><div class="line"><span class="comment"># launch http server</span></div><div class="line">$ node server.js</div></pre></td></tr></table></figure>
<h2 id="Extras"><a href="#Extras" class="headerlink" title="Extras"></a>Extras</h2><h3 id="Precompiling-JSX"><a href="#Precompiling-JSX" class="headerlink" title="Precompiling JSX"></a>Precompiling JSX</h3><p>All above demos don’t use JSX compilation for clarity. In production environment, ensure to precompile JSX files before putting them online.</p>
<p>First, install the command-line tools <a href="https://babeljs.io/docs/usage/cli/" target="_blank" rel="external">Babel</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g babel</div></pre></td></tr></table></figure>
<p>Then precompile your JSX files(.jsx) into JavaScript(.js). Compiling the entire src directory and output it to the build directory, you may use the option <code>--out-dir</code> or <code>-d</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ babel src --out-dir build</div></pre></td></tr></table></figure>
<p>Put the compiled JS files into HTML.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello React!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- No need for Browser.js! --&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/helloworld.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Useful-links"><a href="#Useful-links" class="headerlink" title="Useful links"></a>Useful links</h2><ul>
<li><a href="http://facebook.github.io/react" target="_blank" rel="external">React’s official site</a></li>
<li><a href="https://github.com/facebook/react/tree/master/examples" target="_blank" rel="external">React’s official examples</a></li>
<li><a href="http://facebook.github.io/react/docs/glossary.html" target="_blank" rel="external">React (Virtual) DOM Terminology</a>, by Sebastian Markbåge</li>
<li><a href="http://www.jackcallister.com/2015/01/05/the-react-quick-start-guide.html" target="_blank" rel="external">The React Quick Start Guide</a>, by Jack Callister</li>
<li><a href="https://scotch.io/tutorials/learning-react-getting-started-and-concepts" target="_blank" rel="external">Learning React.js: Getting Started and Concepts</a>, by Ken Wheeler</li>
<li><a href="http://ryanclark.me/getting-started-with-react" target="_blank" rel="external">Getting started with React</a>, by Ryan Clark</li>
<li><a href="https://zapier.com/engineering/react-js-tutorial-guide-gotchas/" target="_blank" rel="external">React JS Tutorial and Guide to the Gotchas</a>, by Justin Deal</li>
<li><a href="https://github.com/BinaryMuse/react-primer" target="_blank" rel="external">React Primer</a>, by Binary Muse</li>
<li><a href="http://blog.zigomir.com/react.js/jquery/2015/01/11/jquery-versus-react-thinking.html" target="_blank" rel="external">jQuery versus React.js thinking</a>, by zigomir</li>
</ul>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>BSD licensed</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://andyketter.github.io/2017/02/13/hexo/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="墨含">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="白马非白">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="白马非白" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/13/hexo/" itemprop="url">
                  hexo简单教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-13T15:55:54+08:00">
                2017-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index">
                    <span itemprop="name">教程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/13/hexo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/13/hexo/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="墨含" />
          <p class="site-author-name" itemprop="name">墨含</p>
          <p class="site-description motion-element" itemprop="description">你若安好便是晴天</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">墨含</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"andyketter"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  

  


</body>
</html>
